[build-system]
requires = ["setuptools>=64.0.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "comfystream"
description = "Build Live AI Video with ComfyUI"
version = "0.1.2"
license = { file = "LICENSE" }
dynamic = ["dependencies"]

[project.optional-dependencies]
dev = ["pytest", "pytest-cov"]

[project.urls]
repository = "https://github.com/yondonfu/comfystream"

# Critical: Entry point for ComfyUI custom nodes
[project.entry-points."comfyui.custom_nodes"]
comfystream = "comfystream"

[tool.comfy]
PublisherId = "livepeer-comfystream"
DisplayName = "ComfyStream"
Icon = "https://raw.githubusercontent.com/livepeer/comfystream-docs/main/logo/icon-light-120px.svg"

[tool.setuptools]
packages = ["comfystream", "comfystream.nodes", "comfystream.nodes.audio_utils", "comfystream.nodes.tensor_utils", "comfystream.nodes.video_stream_utils", "comfystream.nodes.api", "comfystream.nodes.web"]

[tool.setuptools.package-dir]
comfystream = "."
"comfystream.nodes" = "nodes"
"comfystream.nodes.audio_utils" = "nodes/audio_utils"
"comfystream.nodes.tensor_utils" = "nodes/tensor_utils"
"comfystream.nodes.video_stream_utils" = "nodes/video_stream_utils"
"comfystream.nodes.api" = "nodes/api"
"comfystream.nodes.web" = "nodes/web"

[tool.setuptools.dynamic]
dependencies = {file = ["requirements.txt"]}